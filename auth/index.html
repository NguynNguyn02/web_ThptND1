<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Hệ Thống Quản Lý Admin</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f4f4f4;
      }
      .container {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .form-group {
        margin-bottom: 15px;
      }
      input {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
      }
      button {
        padding: 10px 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      #postList {
        margin-top: 20px;
      }
      .post-item {
        border: 1px solid #ddd;
        padding: 10px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
      }
    </style>
  </head>
  <body>
    <div class="container" id="loginContainer">
      <h2>Đăng Nhập</h2>
      <div class="form-group">
        <label>Tên đăng nhập:</label>
        <input type="text" id="loginUsername" />
      </div>
      <div class="form-group">
        <label>Mật khẩu:</label>
        <input type="password" id="loginPassword" />
      </div>
      <button onclick="login()">Đăng Nhập</button>
      <p>Chưa có tài khoản? <a href="#" onclick="showRegister()">Đăng ký</a></p>
    </div>

    <div class="container" id="registerContainer" style="display: none">
      <h2>Đăng Ký</h2>
      <div class="form-group">
        <label>Tên đăng nhập:</label>
        <input type="text" id="registerUsername" />
      </div>
      <div class="form-group">
        <label>Mật khẩu:</label>
        <input type="password" id="registerPassword" />
      </div>
      <div class="form-group">
        <label>Xác nhận mật khẩu:</label>
        <input type="password" id="confirmPassword" />
      </div>
      <button onclick="register()">Đăng Ký</button>
      <p>Đã có tài khoản? <a href="#" onclick="showLogin()">Đăng nhập</a></p>
    </div>

    <div class="container" id="adminContainer" style="display: none">
      <h2>Quản Lý Bài Viết</h2>
      <div class="form-group">
        <label>Tiêu đề:</label>
        <input type="text" id="postTitle" />
      </div>
      <div class="form-group">
        <label>Nội dung:</label>
        <input type="text" id="postContent" />
      </div>
      <button onclick="addPost()">Thêm Bài Viết</button>

      <div id="postList"></div>
    </div>

    <script>
      // Dữ liệu giả lập
      let users = JSON.parse(localStorage.getItem("users")) || [];
      let posts = JSON.parse(localStorage.getItem("posts")) || [];
      let currentUser = null;

      function showLogin() {
        document.getElementById("loginContainer").style.display = "block";
        document.getElementById("registerContainer").style.display = "none";
      }

      function showRegister() {
        document.getElementById("loginContainer").style.display = "none";
        document.getElementById("registerContainer").style.display = "block";
      }

      function login() {
        const username = document.getElementById("loginUsername").value;
        const password = document.getElementById("loginPassword").value;

        const user = users.find(
          (u) => u.username === username && u.password === password
        );
        if (user) {
          currentUser = user;
          document.getElementById("loginContainer").style.display = "none";
          document.getElementById("adminContainer").style.display = "block";
          renderPosts();
        } else {
          alert("Đăng nhập thất bại");
        }
      }

      function register() {
        const username = document.getElementById("registerUsername").value;
        const password = document.getElementById("registerPassword").value;
        const confirmPassword =
          document.getElementById("confirmPassword").value;

        if (password !== confirmPassword) {
          alert("Mật khẩu không khớp");
          return;
        }

        if (users.some((u) => u.username === username)) {
          alert("Tên đăng nhập đã tồn tại");
          return;
        }

        const newUser = { username, password };
        users.push(newUser);
        localStorage.setItem("users", JSON.stringify(users));
        alert("Đăng ký thành công");
        showLogin();
      }

      function addPost() {
        const title = document.getElementById("postTitle").value;
        const content = document.getElementById("postContent").value;

        if (!title || !content) {
          alert("Vui lòng nhập đầy đủ thông tin");
          return;
        }

        const newPost = {
          id: Date.now(),
          title,
          content,
          author: currentUser.username,
        };

        posts.push(newPost);
        localStorage.setItem("posts", JSON.stringify(posts));
        renderPosts();

        // Xóa các trường nhập
        document.getElementById("postTitle").value = "";
        document.getElementById("postContent").value = "";
      }

      function renderPosts() {
        const postList = document.getElementById("postList");
        postList.innerHTML = "";

        posts.forEach((post) => {
          const postElement = document.createElement("div");
          postElement.className = "post-item";
          postElement.innerHTML = `
                    <div>
                        <strong>${post.title}</strong>
                        <p>${post.content}</p>
                        <small>Tác giả: ${post.author}</small>
                    </div>
                    <div>
                        <button onclick="editPost(${post.id})">Sửa</button>
                        <button onclick="deletePost(${post.id})">Xóa</button>
                    </div>
                `;
          postList.appendChild(postElement);
        });
      }

      function editPost(id) {
        const post = posts.find((p) => p.id === id);
        if (post) {
          const newTitle = prompt("Nhập tiêu đề mới:", post.title);
          const newContent = prompt("Nhập nội dung mới:", post.content);

          if (newTitle !== null && newContent !== null) {
            post.title = newTitle;
            post.content = newContent;
            localStorage.setItem("posts", JSON.stringify(posts));
            renderPosts();
          }
        }
      }

      function deletePost(id) {
        if (confirm("Bạn có chắc muốn xóa bài viết này?")) {
          posts = posts.filter((p) => p.id !== id);
          localStorage.setItem("posts", JSON.stringify(posts));
          renderPosts();
        }
      }
    </script>
  </body>
</html>
